{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<h1 class="mb-4">Uploaded Files</h1>

<!-- Search bar -->


<!-- Filter options -->
<div class="form-group mb-4">
    <label>
        <input type="checkbox" id="publicFilter"> Public
    </label>
    <label>
        <input type="checkbox" id="privateFilter"> My Files
    </label>
</div>

<!-- File list -->
<ul id="fileList" class="list-group"></ul>


<script>
    function updateFileList() {
        let searchQuery = document.getElementById('searchBar').value;
        let showPublic = document.getElementById('publicFilter').checked;
        let showPrivate = document.getElementById('privateFilter').checked;

        fetch(`/file_list?search=${encodeURIComponent(searchQuery)}&public=${showPublic ? 'on' : 'off'}&private=${showPrivate ? 'on' : 'off'}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('fileList').innerHTML = data.file_list;
            });
    }

    document.getElementById('searchBar').addEventListener('input', updateFileList);
    document.getElementById('publicFilter').addEventListener('change', updateFileList);
    document.getElementById('privateFilter').addEventListener('change', updateFileList);

    // Initial load
    updateFileList();
</script>
{% endblock %}
